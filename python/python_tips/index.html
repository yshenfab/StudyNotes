<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>python tips - Study Notes</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "python tips";
        var mkdocs_page_input_path = "python/python_tips.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Study Notes
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Introduction</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Algorithm</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../algorithm/alg_blog_note/">Alg blog</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../algorithm/algorithms_4th_edition/">Algorithms (4th Edition)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Blockchain</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../blockchain/blockchain/">Blockchain</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Deep Learning</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../deep_learning/google-machine-learning-crash-course/">Google ML Crash Course</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deep_learning/Python%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">Python机器学习</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deep_learning/dive_into_deep_learning/">Dive into Deep Learning</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deep_learning/dl_notes/">DL Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Mathematics</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../mathematics/beauty_of_mathematics/">数学之美</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mathematics/statistics_concepts_and_controversies/">统计学的世界</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Network</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../network/%E5%9B%BE%E8%A7%A3%E7%BD%91%E7%BB%9C/">图解网络 (TODO)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Psychology & Mind</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E4%B8%8E%E4%BC%97%E4%B8%8D%E5%90%8C%E7%9A%84%E5%BF%83%E7%90%86%E5%AD%A6/">与众不同的心理学</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E5%86%B3%E7%AD%96%E4%B8%8E%E5%88%A4%E6%96%AD/">决策与判断</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E6%9A%97%E6%97%B6%E9%97%B4/">暗时间</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E4%BD%A0%E7%9A%84%E7%81%AF%E4%BA%AE%E7%9D%80%E5%90%97/">你的灯亮着吗</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E6%B2%9F%E9%80%9A%E7%9A%84%E8%89%BA%E6%9C%AF/">沟通的艺术</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E5%BD%B1%E5%93%8D%E5%8A%9B/">影响力</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E4%B8%93%E6%B3%A8%E5%8A%9B/">专注力</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Python</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../pythonic/">pythonic</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">python tips</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../python3/">python3</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../effective_python/">Effective Python (TODO)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../data_structure_and_algorithms_in_python/">Data Structures and Algorithms in Python</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Research</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../research/%E5%83%8F%E5%A4%96%E8%A1%8C%E4%B8%80%E6%A0%B7%E6%80%9D%E8%80%83%EF%BC%8C%E5%83%8F%E4%B8%93%E5%AE%B6%E4%B8%80%E6%A0%B7%E5%AE%9E%E8%B7%B5/">像外行一样思考，像专家一样实践</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Startup</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../startup/how_google_works/">How Google Works</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../startup/startup/">startup</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tools</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tools/practical_vim/">vim</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tools/shell/">shell</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tools/git/">git</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tools/markdown/">markdown</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/history_of_quantum_physics/">上帝掷骰子吗？量子物理史话</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/%E9%AB%98%E6%95%88%E8%83%BD%E4%BA%BA%E5%A3%AB%E7%9A%847%E4%B8%AA%E4%B9%A0%E6%83%AF/">高效能人士的7个习惯</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/%E5%BA%95%E5%B1%82%E9%80%BB%E8%BE%91/">底层逻辑</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/%E9%AB%98%E6%95%88%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%8445%E4%B8%AA%E4%B9%A0%E6%83%AF/">高效程序员的45个习惯</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/type_system/">Type System</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Todo</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../todo/todo/">TODO</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Study Notes</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Python &raquo;</li><li>python tips</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="python-tips">Python Tips</h1>
<p>Tips collected from <a href="http://book.pythontips.com/en/latest/index.html">python tips</a></p>
<ul>
<li><code>*args</code> and <code>**kwargs</code></li>
</ul>
<p><code>*args</code>: non-keyworded
<code>**kwargs</code>: allow you to pass keyworded variable length of arguments to a
function.</p>
<ul>
<li>Debugging: python debugger (pdb)</li>
</ul>
<p>running from command line:</p>
<p><code>python -m pdb my_code.py</code></p>
<p>running inside a script:</p>
<pre><code class="language-python">import pdb
def make_bread():
    pdb.set_trace() # set break points
    return &quot;I don't have time&quot;

print(make_bread())
</code></pre>
<ul>
<li>pdb usage</li>
</ul>
<table>
<thead>
<tr>
<th>shortcut</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>c</td>
<td>continue execution</td>
</tr>
<tr>
<td>w</td>
<td>show context of current line it is executing</td>
</tr>
<tr>
<td>a</td>
<td>print the argument list of current function</td>
</tr>
<tr>
<td>s</td>
<td>execute the current line and stop at the first possible occasion</td>
</tr>
<tr>
<td>n</td>
<td>continue execution until the next line in the current function is reached or it returns</td>
</tr>
</tbody>
</table>
<ul>
<li>Ternary Operators</li>
</ul>
<p>Ternary operators are more commonly known as conditional expressions in
Python.</p>
<p><code>condition if true if condition else condition if false</code></p>
<p><code>state = "nice" if condition else "not nice"</code></p>
<ul>
<li>
<p>Decorators are functions which modify the functionality of other functions. </p>
<p>1) Define functions within functions;</p>
<p>2) Return functions from within functions;</p>
<p>3) Give a function as an argument to another function.</p>
</li>
<li>
<p>Don't use global.</p>
</li>
<li>Mutable means "able to be changed", immutable means "constant". In Python, the default arguments are evaluated once when the function is defined, not each time the function is called. You should never define default arguments of mutable type unless you know what you are doing.</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>Data types</th>
</tr>
</thead>
<tbody>
<tr>
<td>mutable</td>
<td>list, dict, set</td>
</tr>
<tr>
<td>immutable</td>
<td>int, float, bool, string, tuple</td>
</tr>
</tbody>
</table>
<ul>
<li><code>__slots__</code> Magic</li>
</ul>
<p>Python uses dict to store an object's instance attributes, which sucks a lot of
RAM. Using <code>__slots__</code> to tell python not to use a dict, and only allocate space
for a fixed set of attributes, i.e., save RAM instead of using dict.</p>
<p>Example:</p>
<pre><code class="language-python"># without __slots__
class MyClass(object):
    def __init__(self, name, uid):
        self.name = name
        self.id = uid
        self.set_up()

# with __slots__ (40%-50% reduction of RAM)
class MyClass(object):
    __slots__ = ['name', 'uid']
    def __init__(self, name, uid):
        self.name = name
        self.id = uid
        self.set_up()
</code></pre>
<ul>
<li>
<p>Collections, container data types (defaultdict, OrderedDict, counter, deque,
    namedtuple, enum.Enum)</p>
</li>
<li>
<p>Object introspection</p>
<p>1) <code>dir(list)</code> to get all the methods of a list;</p>
<p>2) <code>type(object)</code> returns the type of an object, <code>id(object)</code> returns the
unique id of an object;</p>
<p>3) insepct module, <code>import inspect</code>,
<code>inspect.getmembers(str)</code></p>
</li>
<li>
<p>list/dict/set/generator comprehensions</p>
</li>
<li>
<p>Exceptions</p>
</li>
</ul>
<p>1) try/except</p>
<pre><code class="language-python">try:
    file = open(filename, 'rb')
except IOError as e:
    print(f'An IOError occured. {e.args[-1]}')
</code></pre>
<p>2) Handling multiple exceptions</p>
<pre><code class="language-python"># method 1
except (IOError, EOFError) as e:
    print(f'An Error occured. {e.args[-1]}')
    raise e
# method 2
except IOError as e:
    print(&quot;An IO error occurred.&quot;)
    raise e
except EOFError as e:
    print(&quot;An EOF error occurred.&quot;)
    raise e
# method 3
except (IOError, EOFError) as e:
    # some logging
    raise e
</code></pre>
<p>3) finally</p>
<pre><code class="language-python">try:
    file = open('test.txt', 'rb')
except IOError as e:
    print('An IOError occurred. {}'.format(e.args[-1]))
finally:
    print(&quot;This would be printed whether or not an exception occurred!&quot;)
</code></pre>
<p>4) try/else</p>
<pre><code class="language-python">try:
    print('I am sure no exception is going to occur!')
except Exception:
    print('exception')
else:
    # any code that should only run if no exception occurs in the try,
    # but for which exceptions should NOT be caught
    print('This would only run if no exception occurs. And an error here '
          'would NOT be caught.')
finally:
    print('This would be printed in every case.')
</code></pre>
<ul>
<li>Lambdas (one line functions, anoymous), blueprint: <code>lambda arguments: manipulate(arguments)</code></li>
<li>Profiling a script. This can be extremely helpful in pinpointing the bottlenecks in your script:</li>
</ul>
<p><code>python -m cProfile my_script.py</code></p>
<p>(cProfile is a faster implementation of profile as it is written in C)</p>
<ul>
<li>for/else: else condition executes when no break happens</li>
<li>Python C extensions: ctypes</li>
<li><code>open()</code>, syntax: <code>open(filename, mode)</code></li>
</ul>
<table>
<thead>
<tr>
<th>mode</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>read</td>
</tr>
<tr>
<td>r+</td>
<td>read and write</td>
</tr>
<tr>
<td>w</td>
<td>overwrite</td>
</tr>
<tr>
<td>a</td>
<td>append</td>
</tr>
<tr>
<td>b</td>
<td>binary</td>
</tr>
</tbody>
</table>
<ul>
<li>Coroutines: similar to generators with a few differences. Generators are data
    producers. Coroutines are data consumers</li>
</ul>
<pre><code class="language-python"># generator
def fib():
    a,b = 0,1
    while 1:
        yield a
        a,b = b,a+b
# coroutine
def grep(pattern):
    print(&quot;Searching for&quot;, pattern)
    while 1:
        line = (yield)
        if pattern in line:
            print(line)

search = grep('coroutine')
next(search)
search.send(&quot;hahaha&quot;)
search.send(&quot;I love coroutines!&quot;)
# ...
search.close()
</code></pre>
<ul>
<li>Function Caching: Function caching allows us to cache the return values of a function depending on the arguments.</li>
</ul>
<pre><code class="language-python">from functools import lru_cache

@lru_cache(maxsize=32)
def fib(n):
    if n &lt; 2:
        return n
    return fib(n-1) + fib(n-2)

print([fib(n) for n in range(10)])
# Output: [0, 1, 1, 2, 3, 5, 8, 13, 21, 34]
fib.cache_clear()
</code></pre>
<ul>
<li>Context Managers: Context managers allow you to allocate and release resources precisely when you want to. The most widely used example of context manager is <code>with</code>.</li>
</ul>
<pre><code class="language-python"># Implementing a Context Manager as a Class
# a context manager has an __enter__ and __exit__ method defined
class File(object):
    def __init__(self, file_name, method):
        self.file_obj = open(file_name, method)
    def __enter__(self):
        return self.file_obj
    def __exit__(self, type, value, traceback):
        return self.file_obj.close()

with File('demo.txt', 'w') as opened_file:
    opened_file.write('Hola!')

# Handling Exceptions
class File(object):
     def __init__(self, file_name, method):
         self.file_obj = open(file_name, method)
     def __enter__(self):
         return self.file_obj
     def __exit__(self, type, value, traceback):
         print(&quot;Exception has been handled&quot;)
         self.file_obj.close()
         return True

with File('demo.txt', 'w') as opened_file:
    opened_file.undefined_function()

# Implementing a Context Manager as a generator
from contextlib import contextmanager

@contextmanager
def open_file(name):
    f = open(name, 'w')
    yield f
    f.close()

with open_file('some_file') as f:
    f.write('hola!')
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../pythonic/" class="btn btn-neutral float-left" title="pythonic"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../python3/" class="btn btn-neutral float-right" title="python3">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../pythonic/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../python3/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
