<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>python3 - Study Notes</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "python3";
        var mkdocs_page_input_path = "python/python3.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Study Notes
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Introduction</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Algorithm</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../algorithm/alg_blog_note/">Alg blog</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../algorithm/algorithms_4th_edition/">Algorithms (4th Edition)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Blockchain</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../blockchain/blockchain/">Blockchain</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Deep Learning</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../deep_learning/google-machine-learning-crash-course/">Google ML Crash Course</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deep_learning/Python%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">Python机器学习</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../deep_learning/dive_into_deep_learning/">Dive into Deep Learning</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Mathematics</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../mathematics/beauty_of_mathematics/">数学之美</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mathematics/statistics_concepts_and_controversies/">统计学的世界</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Psychology & Mind</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E4%B8%8E%E4%BC%97%E4%B8%8D%E5%90%8C%E7%9A%84%E5%BF%83%E7%90%86%E5%AD%A6/">与众不同的心理学</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E5%86%B3%E7%AD%96%E4%B8%8E%E5%88%A4%E6%96%AD/">决策与判断</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E6%9A%97%E6%97%B6%E9%97%B4/">暗时间</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E4%BD%A0%E7%9A%84%E7%81%AF%E4%BA%AE%E7%9D%80%E5%90%97/">你的灯亮着吗</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E6%B2%9F%E9%80%9A%E7%9A%84%E8%89%BA%E6%9C%AF/">沟通的艺术</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E5%BD%B1%E5%93%8D%E5%8A%9B/">影响力</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../psychology/%E4%B8%93%E6%B3%A8%E5%8A%9B/">专注力</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Python</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../effective_python/">Effective python</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pythonic/">pythonic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../py_tips/">py tips</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">python3</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../numpy/">numpy</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Research</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../research/%E5%83%8F%E5%A4%96%E8%A1%8C%E4%B8%80%E6%A0%B7%E6%80%9D%E8%80%83%EF%BC%8C%E5%83%8F%E4%B8%93%E5%AE%B6%E4%B8%80%E6%A0%B7%E5%AE%9E%E8%B7%B5/">像外行一样思考，像专家一样实践</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Startup</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../startup/how_google_works/">How Google Works</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../startup/startup/">startup</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tools</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tools/practical_vim/">vim</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tools/shell/">shell</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tools/git/">git</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tools/markdown/">markdown</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/history_of_quantum_physics/">上帝掷骰子吗？量子物理史话</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/%E9%AB%98%E6%95%88%E8%83%BD%E4%BA%BA%E5%A3%AB%E7%9A%847%E4%B8%AA%E4%B9%A0%E6%83%AF/">高效能人士的7个习惯</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/%E5%BA%95%E5%B1%82%E9%80%BB%E8%BE%91/">底层逻辑</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/%E9%AB%98%E6%95%88%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%8445%E4%B8%AA%E4%B9%A0%E6%83%AF/">高效程序员的45个习惯</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Todo</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../todo/todo/">TODO</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Study Notes</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Python &raquo;</li><li>python3</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="table-of-contents">Table of Contents</h1>
<ol>
<li><a href="#org43e4e58">Tutorial</a><ol>
<li><a href="#orgeafa2f4">Chap. 1-4</a><ol>
<li><a href="#org83bf5cd">列表 list[]</a></li>
<li><a href="#orgd261232">if elif else</a></li>
<li><a href="#org6465294">range()</a></li>
<li><a href="#org9134575">循环和try都可以有else语句！</a></li>
<li><a href="#org32d618c">pass 啥也不干，留空</a></li>
<li><a href="#org1301336">def fib(n): 可以直接用 f = fib然后调用f(100)</a></li>
<li><a href="#orgbb84fe5">def func(kind, *arguments, **keywords)</a></li>
<li><a href="#orgcde8770">可变参数列表 def func(a, b, \*args)</a></li>
<li><a href="#orgd3e8442">参数列表的分拆</a></li>
<li><a href="#orgb9e33d9">Lambda形式</a></li>
<li><a href="#org5ef71e8">荐类名用驼峰命名，函数和方法名用小写<sub>和</sub><sub>下划线</sub>。总是用self作为方法的第一个参数</a></li>
</ol>
</li>
<li><a href="#orgab3ac9e">Chap. 5 数据结构</a><ol>
<li><a href="#org268fe41">List更多用法</a></li>
<li><a href="#orgf8216fe">del语句</a></li>
<li><a href="#org5b1bf4b">元组和序列 tuple</a></li>
<li><a href="#org75c4461">集合 set</a></li>
<li><a href="#org0e67c3c">字典 dict</a></li>
<li><a href="#org0c7e225">循环技巧</a></li>
<li><a href="#org031797a">深入条件控制</a></li>
<li><a href="#orgf283fdd">比较序列和其他类型</a></li>
</ol>
</li>
<li><a href="#org409fa0f">Chap. 6 模块</a><ol>
<li><a href="#orgd824820">深入模块</a></li>
<li><a href="#org9579e34">dir()函数</a></li>
<li><a href="#org8fcc2fc">包</a></li>
</ol>
</li>
<li><a href="#org0db3759">Chap. 7 输入和输出</a><ol>
<li><a href="#orgd6f76e2">格式化输出</a></li>
<li><a href="#orga50d06b">文件读写</a></li>
</ol>
</li>
<li><a href="#orgd9d9dbb">Chap. 8 错误和异常</a><ol>
<li><a href="#orgad33772">语法错误(syntax errors)</a></li>
<li><a href="#org107aacd">异常(exceptions)</a></li>
<li><a href="#orgcfa5ac0">异常处理</a></li>
<li><a href="#orgb84bbb1">抛出异常</a></li>
<li><a href="#orgf987301">用户自定义异常</a></li>
<li><a href="#org29c51ac">定义清理行为</a></li>
<li><a href="#org2711638">预定义清理行为</a></li>
</ol>
</li>
<li><a href="#org298451e">Chap. 9 类</a><ol>
<li><a href="#orgeccb034">Python作用域和命名空间</a></li>
<li><a href="#orgad6a776">初识类</a></li>
<li><a href="#orgdd486e8">一些说明</a></li>
<li><a href="#org142518b">继承</a></li>
<li><a href="#org30b69a9">私有变量</a></li>
<li><a href="#org055091f">补充</a></li>
<li><a href="#org314375b">异常也是类</a></li>
<li><a href="#orged0caba">迭代器</a></li>
<li><a href="#org9214b5b">生成器Generator</a></li>
<li><a href="#org6ea4048">生成器表达式</a></li>
</ol>
</li>
<li><a href="#orgb14592c">Chap. 10 Python标准库概览</a><ol>
<li><a href="#org0f17999">操作系统接口</a></li>
<li><a href="#orgba3ff84">文件通配符</a></li>
<li><a href="#org269dc5a">命令行参数</a></li>
<li><a href="#orgc71e01b">错误输出重定向和程序终止</a></li>
<li><a href="#org214dd61">字符串正则匹配</a></li>
<li><a href="#orge7092eb">数学</a></li>
<li><a href="#orge641e16">互联网访问</a></li>
<li><a href="#org924e1aa">日期和时间</a></li>
<li><a href="#org9130a0e">数据压缩</a></li>
<li><a href="#orgf1be11a">性能度量</a></li>
<li><a href="#orgb02e511">质量控制</a></li>
</ol>
</li>
<li><a href="#org432b527">Chap. 11 标准库浏览-Part 2</a><ol>
<li><a href="#orgcc78813">输出格式</a></li>
<li><a href="#orgfa29acb">模板</a></li>
<li><a href="#orgacca7ba">使用二进制数据记录布局</a></li>
<li><a href="#orgd0e9f10">多线程</a></li>
<li><a href="#orga0b2e6e">日志</a></li>
<li><a href="#orga4e0525">弱引用</a></li>
<li><a href="#org4e50430">列表工具</a></li>
<li><a href="#org8621569">十进制浮点数算法</a></li>
</ol>
</li>
<li><a href="#org764bd64">Chap. 12 虚拟环境和包</a><ol>
<li><a href="#orga161679">简介</a></li>
<li><a href="#org25bd72a">创建虚拟环境</a></li>
<li><a href="#orgb58e847">使用pip管理包</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#orgfc5f61d">10 idioms</a><ol>
<li><a href="#orgce51d8c">Make a script both importable and executable</a></li>
<li><a href="#orgfde7299">Test for “truthy” and “falsy” values</a></li>
<li><a href="#org171b75a">Use in where possible</a></li>
<li><a href="#org78a27aa">Swap values without temp variable</a></li>
<li><a href="#orgca50116">Build strings using sequence</a></li>
<li><a href="#org53d0a04">EAFP is preferable to LBYL</a></li>
<li><a href="#orgc1c463a">Enumerate</a></li>
<li><a href="#org3493f12">Build lists using list comprehensions</a></li>
<li><a href="#org6e0f5df">Create dict from keys and values using zip</a></li>
<li><a href="#orgebb118c">And the rest&#x2026;!</a></li>
</ol>
</li>
<li><a href="#orgee351b2">Debug</a><ol>
<li><a href="#orgcb86d63">log</a></li>
<li><a href="#orgb298cd8">trace</a></li>
<li><a href="#org045425a">debugger (pdb)</a></li>
<li><a href="#org7e39b2d">refer to http://blog.jobbole.com/51062/</a></li>
</ol>
</li>
<li><a href="#org6b2ee56">python高效编程技巧举例</a><ol>
<li><a href="#org18f07bc">字典推导和集合推导（dict vs. set）</a></li>
<li><a href="#org6bdde72">计数时用counter计数对象</a></li>
<li><a href="#orgefd654b">漂亮的打印出json</a></li>
<li><a href="#orgdbe3eb9">创建一次性的、快速的小型web服务</a></li>
</ol>
</li>
</ol>
<p><a id="org43e4e58"></a></p>
<h1 id="tutorial">Tutorial</h1>
<p><a id="orgeafa2f4"></a></p>
<h2 id="chap-1-4">Chap. 1-4</h2>
<p><a id="org83bf5cd"></a></p>
<h3 id="list">列表 list[]</h3>
<ul>
<li>a = [1, 4, 9, 16, 25]</li>
<li>列表的元素不必是同一类型</li>
<li>a + [36, 49, 64, 81, 100]
    [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</li>
<li>a.append(121) 效率比 a + [121] 高</li>
<li>a[2:5] = [1,2,3] 替换元素</li>
<li>a[2:5] = [] 删除元素</li>
<li>a[:] = [] 清空列表</li>
<li>嵌套列表 x = [1,3,5] y = [2,4,6] z = [x,y] 
    z[0] ([1,3,5])  z[0][1] ('b')</li>
<li>a.insert(index, value)</li>
</ul>
<p><a id="orgd261232"></a></p>
<h3 id="if-elif-else">if elif else</h3>
<p><a id="org6465294"></a></p>
<h3 id="range">range()</h3>
<ul>
<li>range(0,5) range(5)</li>
<li>range(0,100,10)</li>
<li>list(range(5)) [0,1,2,3,4]</li>
</ul>
<p><a id="org9134575"></a></p>
<h3 id="tryelse">循环和try都可以有else语句！</h3>
<p><a id="org32d618c"></a></p>
<h3 id="pass">pass 啥也不干，留空</h3>
<p><a id="org1301336"></a></p>
<h3 id="def-fibn-f-fibf100">def fib(n): 可以直接用 f = fib然后调用f(100)</h3>
<p><a id="orgbb84fe5"></a></p>
<h3 id="def-funckind-arguments-keywords">def func(kind, *arguments, **keywords)</h3>
<ul>
<li>带*的参数接收元组</li>
<li>带**的参数接收字典</li>
</ul>
<p><a id="orgcde8770"></a></p>
<h3 id="def-funca-b-args">可变参数列表 def func(a, b, \*args)</h3>
<p><a id="orgd3e8442"></a></p>
<h3 id="_1">参数列表的分拆</h3>
<ul>
<li>用*拆分元组
    args = [3,6]
    list(range(*args))</li>
<li>用**拆分字典
    def func(a, b='xxx', c='yyy')
    d = {"a":"qqq", "b":"www", "c":"eee"}
    func(**d)</li>
</ul>
<p><a id="orgb9e33d9"></a></p>
<h3 id="lambda">Lambda形式</h3>
<ul>
<li>通过lambda关键字</li>
<li>lambda a,b: a+b 返回两个参数的和</li>
<li>Lambda 形式可以用于任何需要的函数对象</li>
<li>语义上讲，它们只是普通函数定义中的一个语法技巧</li>
<li>类似于嵌套函数定义</li>
<li>def func(n):
        return lambda x: x+n
    f = func(10)
    f(0) # 10
    f(1) # 11</li>
</ul>
<p><a id="org5ef71e8"></a></p>
<h3 id="self">荐类名用驼峰命名，函数和方法名用小写<sub>和</sub><sub>下划线</sub>。总是用self作为方法的第一个参数</h3>
<p><a id="orgab3ac9e"></a></p>
<h2 id="chap-5">Chap. 5 数据结构</h2>
<p><a id="org268fe41"></a></p>
<h3 id="list_1">List更多用法</h3>
<ol>
<li>
<p>常用函数</p>
<ul>
<li>list.append(x) 添加元素x到列表结尾</li>
<li>list.extend(L) 将一个给定列表L中的所有元素都添加到列表list末尾</li>
<li>list.insert(i,x) 指定位置插入元素</li>
<li>list.remove(x) 删除列表中值为x的第一个元素，如果没有返回错误</li>
<li>list.pop(i) 从指定位置删除元素，并将其返回
    list.pop() 删除并返回最后一个元素</li>
<li>list.clear() 删除所有元素</li>
<li>list.index(x) 返回列表中第一个值为x的元素的索引</li>
<li>list.count(x) 返回x在列表中出现的次数</li>
<li>list.sort() 元素排序</li>
<li>list.reverse() 倒序</li>
<li>list.copy() 返回一个浅拷贝</li>
</ul>
</li>
<li>
<p>列表当堆栈使用</p>
<ul>
<li>append和pop</li>
</ul>
</li>
<li>
<p>列表当队列使用</p>
<ul>
<li>要实现队列，使用 collections.deque，它为在首尾两端快速插入和删除而设计</li>
<li>from collections import deque</li>
<li>queue = deque(["Eric", "John", "Michael"])</li>
<li>queue.append("Yang")和queue.popleft()</li>
</ul>
</li>
<li>
<p>列表推导式</p>
<ul>
<li>squares = []
    for x in range(10):
        squares.append(x**2)
    这个for循环完毕后，变量x依然存在</li>
<li>squares = list(map(lambda x: x**2, range(10)))则不会产生任何的副作用
    或者等价于squares = [x**2 for x in range(10)]</li>
</ul>
</li>
</ol>
<p><a id="orgf8216fe"></a></p>
<h3 id="del">del语句</h3>
<ul>
<li>del list[idx] 删除列表中给定索引的值</li>
<li>del list[2:4]</li>
<li>del list[:] 清空list，此时list = []</li>
<li>del list 删除整个变量，此后再引用list就会报错，直到再给list赋值</li>
</ul>
<p><a id="org5b1bf4b"></a></p>
<h3 id="tuple">元组和序列 tuple</h3>
<ul>
<li>python中的序列类型：list列表、tuple元组、range序列</li>
<li><strong>一个元组由数个逗号分隔的值组成</strong></li>
<li>t = 12345, 54321, 'hello!' # (12345, 54321, 'hello!')</li>
<li>可通过t[i]访问元组元素</li>
<li>元组可以嵌套：u = t, (1,2,3,4,5) # ((12345, 54321, 'hello!'), (1,2,3,4,5))</li>
<li><strong>元组不可改变</strong> 如t[0] = 8888 报错！即元组元素不可被赋值</li>
<li>t2 = ([1,2,3], [3,2,1]) 可行</li>
<li>empty = () 空元组</li>
<li>singleton = 'hello', 特殊情况：构造包含1个元素的元组，结尾需要有个逗号</li>
</ul>
<p><a id="org75c4461"></a></p>
<h3 id="set">集合 set</h3>
<ul>
<li><strong>无序不重复元素的集</strong> 基本功能包括关系测试和消除重复元素</li>
<li>支持并集、交集、差集、对称差集等运算</li>
<li><strong>用大括号{}或者set()来创建集合，空集合只能用set()来创建而不能用{}，{}用于创建空字典</strong></li>
<li>a - b  在a不在b中
    a | b  在a或在b中
    a &amp; b  在a也在b中
    a ^ b  在a或在b中但不同时在a和b中</li>
</ul>
<p><a id="org0e67c3c"></a></p>
<h3 id="dict">字典 dict</h3>
<ul>
<li>序列是以连续的整数为索引，字典以关键字为索引，关键字可以是任意不可变类型，通常用字符串或数值</li>
<li>key:value</li>
<li>tel = {'yang': 1234, 'shen':5678}
    tel['leon'] = 4321
    del tel['shen']
    list(tel.keys())
    sorted(tel.keys())
    'yang' in tel # True</li>
<li>用dict()构造函数直接从key-value对中创建字典
    dict([('a',1), ('b',2), ('c',3)])</li>
<li>如果key都是简单的字符串，则可以
    dict(aves=1, pam=2, yang=3)</li>
</ul>
<p><a id="org0c7e225"></a></p>
<h3 id="_2">循环技巧</h3>
<ol>
<li>
<p>items()</p>
<p>字典中循环时，key-value可以用items()同时解读：
for k,v in dict.items():
    print(k, v)</p>
</li>
<li>
<p>enumerate()</p>
<p>序列中循环时，索引位置和对应值可以使用enumerate()同时得到：
for i,v in enumerate(['a','b','c']):
    print(i, v)
0 a
1 b
2 c</p>
</li>
<li>
<p>zip()</p>
<p>同时循环多个序列，可以用zip()整体打包：
questions = ['name', 'sex', 'score']
answers = ['yang', 'male', '100']
for q, a in zip(questions, answers):
    print(q, a)</p>
</li>
<li>
<p>reversed()</p>
<p>逆向循环序列
for i in reversed(range(1,10)):
    print i</p>
</li>
<li>
<p>sorted()</p>
<p>对序列进行顺序排序，不改动原序列，而是生成一个新的已排序的序列
for x in sorted(set(list)):
    print x</p>
</li>
</ol>
<p><a id="org031797a"></a></p>
<h3 id="_3">深入条件控制</h3>
<ol>
<li>
<p>比较操作符</p>
<ul>
<li>in和not in审核值是否在一个区间之内</li>
<li>is和is not较两个对象是否相同</li>
<li>所有的比较操作符具有相同的优先级，低于所有的数值操作</li>
<li>比较操作可以传递，a &lt; b == c审核是否a小于b并且b等于c</li>
</ul>
</li>
<li>
<p>逻辑操作符</p>
<ul>
<li>and/or/not</li>
<li>优先级低于比较操作符，not优先级最高，or优先级最低</li>
<li>and和or也叫短路操作符，参数从左向右解析，一旦结果确定就停止</li>
</ul>
</li>
</ol>
<p><a id="orgf283fdd"></a></p>
<h3 id="_4">比较序列和其他类型</h3>
<ul>
<li>(1,2,3) &lt; (1,2,4)</li>
<li>[1,2,3] &lt; [1,2,4]</li>
<li>'ABC' &lt; 'C' &lt; 'Pascal' &lt; 'Python'</li>
<li>(1,2,3,4) &lt; (1,2,4)</li>
<li>(1,2) &lt; (1,2,-1) 前面相同，后者更长</li>
<li>(1,2,3) == (1.0,2.0,3.0)</li>
<li>(1,2,('aa','ab')) &lt; (1,2,('abc','a'),4)</li>
</ul>
<p><a id="org409fa0f"></a></p>
<h2 id="chap-6">Chap. 6 模块</h2>
<p>模块中的定义可以导入到另一个模块或主模块中
模块是包括Python定义和声明的文件
文件名就是模块名加上.py后缀
模块的模块名（字符串）可以由全局变量_<sub>name</sub>_<sub>得到</sub>
例：fibo.py</p>
<p>def fib(n):    # write Fibonacci series up to n
    a, b = 0, 1
    while b &lt; n:
        print(b, end=' ')
        a, b = b, a+b
    print()</p>
<p>def fib2(n): # return Fibonacci series up to n
    result = []
    a, b = 0, 1
    while b &lt; n:
        result.append(b)
        a, b = b, a+b
    return result</p>
<p>使用：
import fibo
fibo.fib(100)
fibo.fib2(1000)
fibo._<sub>name</sub>__ # 'fibo'
如果频繁使用一个函数，可以将它赋予一个本地变量：
xxx = fibo.fib
xxx(500)</p>
<p><a id="orgd824820"></a></p>
<h3 id="_5">深入模块</h3>
<ul>
<li>好的习惯：所有import语句放在模块/脚本的开始，但并非强制</li>
<li>被导入的模块名会放入当前模块的全局符号表中</li>
<li>
<p>from fibo import *
    导入所有除了以下划线<sub>开头的命名</sub>，实践中不鼓励使用导入*</p>
</li>
<li>
<p>模块的搜索路径</p>
<ul>
<li>比如import spam</li>
<li>解释器先在当前目录中搜索spam.py文件</li>
<li>如果没有，接着到sys.path查找</li>
<li>sys.path变量的初值来自于：
    输入脚本的目录（当前目录pwd）
    环境变量PYTHONPATH表示的目录列表中搜索
    python默认安装路径</li>
</ul>
</li>
<li>
<p>“编译的”Python文件</p>
<ul>
<li>为了加快加载模块的速度，python会在_<sub>pycache</sub>_<sub>目录下以module.version.pyc名字缓存每个模块编译后的版本</sub>，通常包含python版本号</li>
<li>部分高级技巧：<ol>
<li>为了减少一个编译模块的大小，在python命令行中用-O或者-OO，-O删除了断言语句，-OO删除了断言语句和_<sub>doc</sub>_<sub>字符串</sub>，优化的模块后缀为.pyo</li>
<li>.pyc和.pyo文件程序不会比.py文件运行更快，只在加载的时候更快</li>
<li>compileall模块可以为指定目录中的所有模块创建.pyc文件（或-O创建.pyo文件）</li>
</ol>
</li>
</ul>
</li>
</ul>
<p><a id="org9579e34"></a></p>
<h3 id="dir">dir()函数</h3>
<ul>
<li>dir()用于按模块名搜索模块定义，返回一个字符串类型的存储列表</li>
<li>例：
    import fibo
    dir(fibo) # ['<span class="underline"><span class="underline">name</span></span>', 'fib', 'fib2']</li>
<li>无参数时，dir()返回当前定义的命名</li>
<li>dir()不会列出内置函数和变量名，如果想列出，用标准模块builtins</li>
<li>import builtins
    dir(builtins)</li>
</ul>
<p><a id="org8fcc2fc"></a></p>
<h3 id="_6">包</h3>
<ul>
<li>A.B表示名为A的包中的名为B的子模块</li>
<li>例：
    import sound.effects.echo 必须通过完整的名称来引用
    from sound.effects import echo 这样就可以直接用echo</li>
<li>from Package import specific<sub>submodule没有错误</sub>！除非导入的模块需要使用其它包中的同名子模块，否则这是推荐的写法。</li>
</ul>
<p><a id="org0db3759"></a></p>
<h2 id="chap-7">Chap. 7 输入和输出</h2>
<p><a id="orgd6f76e2"></a></p>
<h3 id="_7">格式化输出</h3>
<ul>
<li>标准模块string</li>
<li>Template方法</li>
<li>将值转化为字符串：python有将任意值转化为字符串的方法repr()或str()</li>
<li>str()用于将值转化为适于人阅读的形式</li>
<li>repr()转化为供解释器读取的形式</li>
<li>
<p>str.format()用法：
    1.大括号被替换成str.format()的参数
      print('We are the {} who say "{}!"'.format('coders', 'hello world'))
    2.大括号中的数值指定参数的哪一个
      print('{1} and {0}'.format('me', 'you')) # you and me
    3.使用关键字
      print('This {food} is {adj}'.format(food='spam', adj='very horrible'))
    4.位置参数和关键字参数随意组合
      print('The story of {0}, {1} and {other}'.format('Yang', 'Scarlett', other='Shen'))
    5.'!a'应用ascii()  '!s'应用str()  '!r'应用repr()可以在格式化之前转换值
      import math
      print('The value of PI is approximately {}'.format(math.PI))
      print('The value of PI is approximately {!r}'.format(math.PI))
    6.字段名后允许可选的':'和格式指令
      print('The value of PI is approximately {0:.3f}'.format(math.PI))</p>
<p>7.字段后的':'后面加一个整数会限定该字段的最小宽度（美化表格）
  table = {'Sjoerd': 4127, 'Jack': 4098, 'Dcab': 7678}
  for name, phone in table.items():
      print('{0:10} ==&gt; {1:10d}'.format(name, phone))
8.旧式字符串格式化
  print('PI is approximately %5.3f' % math.pi)</p>
</li>
</ul>
<p><a id="orga50d06b"></a></p>
<h3 id="_8">文件读写</h3>
<ol>
<li>
<p>open(filename, mode)</p>
<ul>
<li>返回文件对象，如f = open('workfile', 'w')</li>
<li>mode: 默认为'r'
    'r'只读取文件
    'w'只写入文件(已存在的同名文件将被删除) 
    'a'打开文件进行追加，写入的内容会自动添加到文件末尾
    'r+'打开文件进行读取和写入
    以上默认文件读写为特定编码方式（默认UTF-8）
    'b'以二进制模式打开文件，数据以字节对象的形式进行读写（应用于所有不包含文本的文件）</li>
<li>文本模式下：
    1.读取时，默认将平台有关的行结束符（Unix是\n，Windows是\r\n）转换为\n
    2.写入时，默认将出现的\n转换成平台有关的行结束符
    3.这种修改对ASCII文本文件没问题，但会损坏JPEG或EXE这样的二进制文件中的数据</li>
</ul>
</li>
<li>
<p>文件对象方法</p>
<ol>
<li>
<p>f.read(size)</p>
<ul>
<li>size指定读取字符串长度，如没有指定或指定为负数，则读取并返回整个文件</li>
<li>当文件大小为当前极其内存2倍时，就会产生问题，反之会尽可能按比较大的size读取和返回数据</li>
</ul>
</li>
<li>
<p>f.readline()</p>
<ul>
<li>读取一行，字符串结尾会自动加上\n</li>
<li>for line in f:
    print(line, end='')</li>
</ul>
</li>
<li>
<p>f.readlines()</p>
<ul>
<li>把文件中所有行读到一个列表中，也可以使用list(f)</li>
</ul>
</li>
<li>
<p>f.write(string)</p>
<ul>
<li>将string内容写入文件，并返回写入字符的长度</li>
<li>写入其他内容时，用str(other<sub>content</sub>)先转换为string</li>
</ul>
</li>
<li>
<p>f.tell()</p>
<ul>
<li>返回一个整数，代表文件对象在文件中的指针位置，该数值计量了自文件开头到指针处的比特数</li>
</ul>
</li>
<li>
<p>f.seed(offset, from<sub>what</sub>)</p>
<ul>
<li>改变文件对象指针，从指定的引用位置from<sub>what移动offset比特</sub></li>
<li>from<sub>what为0表示自文件起始处开始</sub>，1表示自当前文件指针位置开始，2表示自文件末尾开始</li>
<li>from<sub>what可以忽略</sub>，默认为0</li>
</ul>
</li>
<li>
<p>f.close()</p>
<ul>
<li>关闭文件并释放其占用的所有系统资源</li>
</ul>
</li>
<li>
<p>关键字with</p>
<ul>
<li>用关键字with处理文件对象是个好习惯</li>
<li>先进之处在于文件用完后会 <strong>自动关闭</strong> ，就算发生异常也没关系</li>
<li>它是try-finally块的简写：
    with open('filename', 'r') as f:
        read<sub>data</sub> = f.read()</li>
</ul>
</li>
</ol>
</li>
<li>
<p>使用json存储结构化数据</p>
<p>标准模块json可以接受Python数据结构，并将它们转换为字符串表示形式
此过程称为 <strong>序列化</strong>
从字符串表示形式重新构建数据结构称为 <strong>反序列化</strong></p>
<ol>
<li>
<p>json.dumps()</p>
<ul>
<li>json.dumps([1, 'simple', 'list'])查看json字符串表示形式</li>
</ul>
</li>
<li>
<p>json.dump()</p>
<ul>
<li>json.dump(x, f) 直接将对象x序列化到文件f</li>
</ul>
</li>
<li>
<p>json.load()</p>
<ul>
<li>json.load(f) 重新解码对象</li>
</ul>
</li>
<li>
<p>pickle模块</p>
<p>与JSON不同，pickle是一个协议，它允许任意复杂的Python对象的序列化。
因此，它只能用于Python而不能用来与其他语言编写的应用程序进行通信。
默认情况下它也是不安全的：如果数据由熟练的攻击者精心设计，
反序列化来自一个不受信任源的pickle数据可以执行任意代码。</p>
</li>
</ol>
</li>
</ol>
<p><a id="orgd9d9dbb"></a></p>
<h2 id="chap-8">Chap. 8 错误和异常</h2>
<p><a id="orgad33772"></a></p>
<h3 id="syntax-errors">语法错误(syntax errors)</h3>
<p><a id="org107aacd"></a></p>
<h3 id="exceptions">异常(exceptions)</h3>
<p>异常也有不同的类型，异常类型做为错误信息的一部分显示出来</p>
<p><a id="orgcfa5ac0"></a></p>
<h3 id="_9">异常处理</h3>
<ul>
<li>try:
        &#x2026;
    except xxxError:
        &#x2026;
    except yyyError: # 一个try可以带有多个except
        &#x2026;
    except (aaaError, bbbError, cccError): # 一个except可以包含多种error
        &#x2026;
    else: # try&#x2026;except可以带有一个else语句，只能放在所有except子句之后，当try没有抛出异常并需要执行一段代码时使用
        &#x2026;</li>
<li>为except指定一个变量，这个变量绑定于一个异常实例，一旦异常发生，会在抛出前绑定所有指定的属性
    try:
        raise Exception('spam', 'egg')
    except Exception as inst:
        print(type(inst)) # <class 'Exception'>
        print(inst.args) # ('spam', 'eggs')
        print(inst) # ('spam', 'eggs')
        x, y = inst.args
        print(x) # spam
        print(y) # eggs</li>
</ul>
<p><a id="orgb84bbb1"></a></p>
<h3 id="_10">抛出异常</h3>
<ul>
<li>raise语句允许强制抛出一个指定的异常，如raise NameError('HiThere')</li>
</ul>
<p><a id="orgf987301"></a></p>
<h3 id="_11">用户自定义异常</h3>
<p>创建新的异常类型来命名自己的异常，异常类通常应该直接或间接从Exception类派生：
class MyError(Exception):
    def _<sub>init</sub>_<sub>(self, value)</sub>:
        self.value = value
    def _<sub>str</sub>_<sub>(self)</sub>:
        return repr(self.value)</p>
<p>try:
    raise MyError(2*2)
except MyError as e:
    print('My exception occurred, value:', e.value)</p>
<p><a id="org29c51ac"></a></p>
<h3 id="_12">定义清理行为</h3>
<p>try语句还有一个可选的句子finally，目的在于定义在任何情况下都一定要执行的功能，如：
try:
    raise KeyboardInterrupt
finally:
    print('Goodbye, world!')
即便try语句经由break, continue或return语句，退出时也会执行finally
在真实场景的应用程序中，finally子句用于释放外部资源（文件或网络连接之类的），无论它们的使用过程中是否出错。</p>
<p><a id="org2711638"></a></p>
<h3 id="_13">预定义清理行为</h3>
<p>for line in open("myfile.txt"):
    print(line)
上面代码执行完后没有立即关闭打开的文件，脚本里没什么，大型程序就会出问题，改用with确保总能及时准确清理：
with open("myfile.txt") as f:
    for line in f:
        print(line)
语句执行后，文件f总会被关闭，即使处理文件中的数据时出错也一样</p>
<p><a id="org298451e"></a></p>
<h2 id="chap-9">Chap. 9 类</h2>
<p><a id="orgeccb034"></a></p>
<h3 id="python">Python作用域和命名空间</h3>
<ul>
<li>命名空间是从命名到对象的映射</li>
<li>z.real “.”之后的命名称为属性</li>
<li>内置命名的模块为builtins</li>
<li>Python的一个特别之处在于：如果没有使用global语法，其赋值操作总是在最里层的作用域</li>
<li>import语句和函数定义将模块名或函数绑定于局部作用域（可以使用global语句将变量引入到全局作用域）。</li>
<li>global语句用以指明某个特定的变量为全局作用域，并重新绑定它</li>
<li>nonlocal语句用以指明某个特定的变量为封闭作用域，并重新绑定它</li>
</ul>
<p><a id="orgad6a776"></a></p>
<h3 id="_14">初识类</h3>
<ol>
<li>
<p>类定义语法</p>
<p>class ClassName:
    <statement-1>
    &#x2026;
    &#x2026;
    <statement-N></p>
</li>
<li>
<p>类对象</p>
<p>class MyClass:
    """A simple example class"""
    i = 12345
    def f(self):
        return 'hello world'</p>
<ul>
<li>MyClass.i和MyClass.f分别返回一个整数和一个方法对象</li>
<li>MyClass._<sub>doc</sub>_<sub>返回类的文档字符串</sub>"A simple example class"</li>
<li>类的实例化使用函数符号x = MyClass()</li>
<li>很多类都倾向于将对象创建为有初始状态的，因此类会定义一个名为_<sub>init</sub>_<sub>()</sub>的特殊方法：
    def _<sub>init</sub>_<sub>(self)</sub>:
        self.data = []</li>
<li>举例：</li>
</ul>
<p>class Complex:
    def _<sub>init</sub>_<sub>(self, realpart, imagpart)</sub>:
        self.r = realpart
        self.i = imagpart</p>
<p>x = Complex(3.0, -4.5)
x.r, x.i # (3.0, -4.5)</p>
</li>
<li>
<p>实例对象</p>
<p>x.counter = 1
while x.counter &lt; 10:
    x.counter = x.counter * 2
print(x.counter)
del x.counter</p>
</li>
<li>
<p>方法对象</p>
<ul>
<li>方法通过右绑定方式调用： x.f() # 打印hello world</li>
<li>也可以先存储起来以后调用
    xf = x.f
    print(xf())</li>
<li>调用x.f()相当于MyClass.f(x)</li>
</ul>
</li>
<li>
<p>类和实例变量</p>
<p><strong>实例变量用于对每一个实例都是唯一的数据，类变量用于类的所有实例共享的属性和方法</strong>
class Dog:
    kind = 'canine'
    tricks = []
    def _<sub>init</sub>_<sub>(self, name)</sub>:
        self.name = name
    def add<sub>trick</sub>(self, trick):
        self.tricks.append(trick)
d = Dog('Fido')
e = Dog('Buddy')
d.kind # canine
e.kind # canine
d.name # Fido
e.name # Buddy
d.add<sub>trick</sub>('roll over')
e.add<sub>trick</sub>('play dead')</p>
<p>d.tricks # ['roll over', 'play dead']
类正确设计：
class Dog:
    def _<sub>init</sub>_<sub>(self, name)</sub>:
        self.name = name
        self.tricks = []
    def add<sub>trick</sub>(self, trick):
        self.tricks.append(trick)
d.tricks # ['roll over']
e.tricks # ['play dead']</p>
</li>
</ol>
<p><a id="orgdd486e8"></a></p>
<h3 id="_15">一些说明</h3>
<ul>
<li>数据属性会覆盖同名的方法属性，难debug，约定：
    大写方法名称的首字母，使用一个唯一的小字符串（也许只是一个下划线）作为数据属性名称的前缀，或者方法使用动词而数据属性使用名词。</li>
<li>方法的第一个参数被命名为self。这仅仅是一个约定：对Python而言，名称self绝对没有任何特殊含义</li>
</ul>
<p><a id="org142518b"></a></p>
<h3 id="_16">继承</h3>
<ul>
<li>派生类的定义：
    class DerivedClassName(BaseClassName):
        <statement-1>
        &#x2026;
        &#x2026;
        <statement-N></li>
</ul>
<p>其中BaseClassName为基类名，必须与派生类定义在一个作用域内。
除了类，还可以用表达式，基类定义在另一个模块中时这一点非常有用：
class DerivedClassName(modname.BaseClassName):</p>
<ul>
<li>派生类可能会覆盖其基类的方法</li>
<li>对于 C++ 程序员来说，Python 中的所有方法本质上都是virtual方法</li>
<li>
<p>两个用于继承的函数：</p>
<ol>
<li>isinstance()用于检查实例类型，例如isinstance(obj, int)只有在obj._<sub>class</sub>_<sub>是int或其他从int继承的类型</sub></li>
<li>issubclass()用于检查类继承，例如issubclass(bool, int)返回True，因为bool是int的子类，
    而issubclass(float, int)返回False，因为float不是int的子类</li>
</ol>
</li>
<li>
<p>多继承</p>
<p>class DerivedClassName(Base1, Base2, Base3):
    <statement-1>
    &#x2026;
    &#x2026;
    <statement-N></p>
<ul>
<li>搜索属性从父类继承的深度优先，左到右，而不是搜索两次在同一个类层次结构中，其中有一个重叠</li>
<li>super()可以动态改变解析顺序</li>
</ul>
</li>
</ul>
<p><a id="org30b69a9"></a></p>
<h3 id="_17">私有变量</h3>
<ul>
<li>只能从对像内部访问的“私有”实例变量，在Python中不存在</li>
<li>有一个变通的访问用于大多数Python代码：
    以一个下划线开头的命名（例如<sub>spam</sub>）会被处理为API的非公开部分（无论它是一个函数、方法或数据成员）。它会被视为一个实现细节，无需公开。</li>
</ul>
<p><a id="org055091f"></a></p>
<h3 id="_18">补充</h3>
<ul>
<li>
<p>C中的结构体struct，用一个空的类定义实现：
    class Employee:
        pass
    john = Employee() # create an empty Employee record</p>
<p>john.name = 'John Doe'
john.dept = 'computer lab'
john.salary = 1000</p>
</li>
</ul>
<p><a id="org314375b"></a></p>
<h3 id="_19">异常也是类</h3>
<ul>
<li>有效的（语义上的）异常抛出形式，使用raise语句：
    raise Class或raise Instance</li>
</ul>
<p><a id="orged0caba"></a></p>
<h3 id="_20">迭代器</h3>
<ul>
<li>for item in [1,2,3]:
    for item in (1,2,3):
    for key in {'one':1, 'two':2}:
    for char in "123":
    for line in open('myfile.txt'):</li>
<li>在后台，for语句在容器对象中调用iter()</li>
</ul>
<p><a id="org9214b5b"></a></p>
<h3 id="generator">生成器Generator</h3>
<ul>
<li>Generator是创建迭代器的简单而强大的工具。它们写起来就像是正规的函数，需要返回数据的时候使用yield语句
    def reverse(data):
        for index in range(len(data)-1, -1, -1):
        yield data[index]</li>
</ul>
<p><a id="org6ea4048"></a></p>
<h3 id="_21">生成器表达式</h3>
<ul>
<li>sum(i*i for i in range(10)) # sum of squares</li>
<li>xvec = [10,20,30]
    yvec = [7,5,3]
    sum(x*y for x,y in zip(xvec, yvec)) # dot product</li>
</ul>
<p><a id="orgb14592c"></a></p>
<h2 id="chap-10-python">Chap. 10 Python标准库概览</h2>
<p><a id="org0f17999"></a></p>
<h3 id="_22">操作系统接口</h3>
<p>import os
os.getcwd() # return pwd
os.chdir('<em>home/yang</em>') # change directory
os.system('mkdir test')</p>
<ul>
<li>应该用import os而非from os import *，这样可以保证随操作系统不同而有所变化的os.open()不会覆盖内置函数open()</li>
<li>针对日常的文件和目录管理任务，shutil模块提供了一个易于使用的高级接口：
    import shutil
    shutil.copyfile('data.db', 'archive.db')
    shutil.move('/build/executables', 'installdir')</li>
</ul>
<p><a id="orgba3ff84"></a></p>
<h3 id="_23">文件通配符</h3>
<p>glob模块提供了一个函数用于从目录通配符搜索中生成文件列表：
import glob
glob.glob('*.py') # ['xxx.py', 'aaa.py', 'test.py']当前目录下的</p>
<p><a id="org269dc5a"></a></p>
<h3 id="_24">命令行参数</h3>
<ul>
<li>通用工具脚本经常调用命令行参数。这些命令行参数以链表形式存储于sys模块的argv变量。
    import sys
    print(sys.argv)
    例如在命令行执行python demo.py one two three将得到：
    ['demo.py', 'one', 'two', 'three']</li>
<li>getopt模块使用Unix getopt()函数处理sys.argv</li>
<li>更多的复杂命令行处理由argparse模块提供</li>
</ul>
<p><a id="orgc71e01b"></a></p>
<h3 id="_25">错误输出重定向和程序终止</h3>
<p>sys还有stdin，stdout和stderr属性，即使在stdout被重定向时，后者也可以用于显示警告和错误信息：
sys.stderr.write('Warning: xxxxxxx\n')
大多脚本的直接终止都使用sys.exit()</p>
<p><a id="org214dd61"></a></p>
<h3 id="_26">字符串正则匹配</h3>
<ul>
<li>import re
    re.findall(r'\bf[a-z]*', 'which foot or hand fell fastest') # ['foot', 'fell', 'fastest']
    re.sub(r'(\b[a-z]+) \1', r'\1', 'cat in the the hat') # 'cat in the hat'</li>
<li>只需简单的操作时，字符串方法最好用，因为它们易读，又容易调试：
    'tea for too'.replace('too', 'two') # 'tea for two'</li>
</ul>
<p><a id="orge7092eb"></a></p>
<h3 id="_27">数学</h3>
<ul>
<li>math模块为浮点运算提供了对底层C函数库的访问
    import math
    math.cos(math.pi / 4.0)
    math.log(1024, 2)</li>
<li>random提供了生成随机数的工具
    import random
    random.choice(['apple','pear','banana'])
    random.sample(range(100),10)
    random.random() # random float
    random.randrange(6)</li>
<li>SciPy数值计算模块</li>
</ul>
<p><a id="orge641e16"></a></p>
<h3 id="_28">互联网访问</h3>
<ul>
<li>urllib从urls接收数据</li>
<li>smtplib发送电子邮件
    import smtplib
    server = smtplib.SMTP('localhost')
    server.sendmail('xxx@jlinno.com', 'yyy@jlinno.com',
    """ To: yyy@jlinno.com
    From: xxx.jlinno.com
    blablabla&#x2026;
    """)
    server.quit()</li>
</ul>
<p>需要在localhost运行一个邮件服务器</p>
<p><a id="org924e1aa"></a></p>
<h3 id="_29">日期和时间</h3>
<ul>
<li>datetime支持日期和时间算法的同时，实现的重点放在更有效的处理和格式化输出。该模块还支持时区处理。
    from datetime import date
    now = date.today()
    now # datetime.date(2003, 12, 2)
    now.strftime("%m-%d-%y. %d %b %Y is a %A on the %d day of %B.") # '12-02-03. 02 Dec 2003 is a Tuesday on the 02 day of December.'
    birthday = date(1990, 10, 1)
    age = now - birthday
    age.days</li>
</ul>
<p><a id="org9130a0e"></a></p>
<h3 id="_30">数据压缩</h3>
<ul>
<li>数据打包和压缩模块：zlib, gzip, bz2, lzma, zipfile, tarfile</li>
</ul>
<p><a id="orgf1be11a"></a></p>
<h3 id="_31">性能度量</h3>
<ul>
<li>timeit模块
    from timeit import Timer
    Timer('t=a; a=b; b=t', 'a=1; b=2').timeit() # 0.57535828626024577
    Timer('a,b = b,a', 'a=1; b=2').timeit() # 0.54962537085770791</li>
<li>相对于timeit的细粒度，profile和pstats模块提供了针对更大代码块的时间度量工具</li>
</ul>
<p><a id="orgb02e511"></a></p>
<h3 id="_32">质量控制</h3>
<ul>
<li>doctest模块</li>
<li>unittest模块</li>
</ul>
<p><a id="org432b527"></a></p>
<h2 id="chap-11-part-2">Chap. 11 标准库浏览-Part 2</h2>
<p><a id="orgcc78813"></a></p>
<h3 id="_33">输出格式</h3>
<ul>
<li>reprlib模块为大型的或深度嵌套的容器缩写显示提供了:repr()函数的一个定制版本:
    import reprlib
    reprlib.repr(set('supercalifragilisticexpialidocious')) # "set(['a', 'c', 'd', 'e', 'f', 'g', &#x2026;])"</li>
<li>pprint模块给老手提供了一种解释器可读的方式深入控制内置和用户自定义对象的打印
    import pprint
    t = [[[['black', 'cyan'], 'white', ['green', 'red']], [['magenta', 'yellow'], 'blue']]]
    pprint.pprint(t, width=30)</li>
<li>textwrap模块格式化文本段落以适应设定的屏宽
    import textwrap
    doc = """The wrap() method is just like fill() except that it returns
    a list of strings instead of one big string with newlines to separate
    the wrapped lines."""
    print(textwrap.fill(doc, width=40))</li>
<li>locale模块按访问预定好的国家信息数据库
    import locale
    locale.setlocale(locale.LC<sub>ALL</sub>, 'English<sub>United</sub> States.1252')
    conv = locale.localeconv() # get a mapping of conventions
    x = 1234567.8
    locale.format("%d", x, grouping=True) # '1,234,567'
    locale.format<sub>string</sub>("%s%.*f", (conv['currency<sub>symbol</sub>'], conv['frac<sub>digits</sub>'], x), grouping=True) # '$1,234,567.80'</li>
</ul>
<p><a id="orgfa29acb"></a></p>
<h3 id="_34">模板</h3>
<ul>
<li>string提供了一个灵活多变的模板类Template
    from string import Template
    t = Template('${village}folk send $$110 to $cause')
    t.substitute(village='Nottingham', cause='the ditch fund') # 'Nottinghamfolk send $10 to the ditch fund.'</li>
</ul>
<p><a id="orgacca7ba"></a></p>
<h3 id="_35">使用二进制数据记录布局</h3>
<ul>
<li>struct模块为使用变长的二进制记录格式提供了pack()和unpack()函数</li>
</ul>
<p><a id="orgd0e9f10"></a></p>
<h3 id="_36">多线程</h3>
<ul>
<li>import threading</li>
<li>任务协调的首选方法是把对一个资源的所有访问集中在一个单独的线程中，然后使用queue模块用那个线程服务其他线程的请求</li>
</ul>
<p><a id="orga0b2e6e"></a></p>
<h3 id="_37">日志</h3>
<ul>
<li>import logging
    logging.debug('Debugging information')
    logging.info('Informational message')
    logging.warning('Warning: file %s not found', 'server.conf')
    logging.error('Error occurred')
    logging.critical('Critical error &#x2013; shutting down')</li>
</ul>
<p><a id="orga4e0525"></a></p>
<h3 id="_38">弱引用</h3>
<ul>
<li>weakref模块提供了不用创建引用的跟踪对象工具，一旦对象不再存在，它自动从弱引用表上删除并触发回调</li>
</ul>
<p><a id="org4e50430"></a></p>
<h3 id="_39">列表工具</h3>
<ul>
<li>from array import array</li>
<li>from collections import deque
    从左边append/pop更快，内部查询更慢，适用于队列实现和广度优先的树搜索</li>
<li>import bisect 存储链表</li>
<li>heapq提供了基于正规链表的堆实现
    from heapq import heapify, heappop, heappush</li>
</ul>
<p><a id="org8621569"></a></p>
<h3 id="_40">十进制浮点数算法</h3>
<p>from decimal import *</p>
<p><a id="org764bd64"></a></p>
<h2 id="chap-12">Chap. 12 虚拟环境和包</h2>
<p><a id="orga161679"></a></p>
<h3 id="_41">简介</h3>
<p>virtualenv</p>
<p><a id="org25bd72a"></a></p>
<h3 id="_42">创建虚拟环境</h3>
<p>用于创建和管理虚拟环境的脚本叫做pyvenv</p>
<p><a id="orgb58e847"></a></p>
<h3 id="pip">使用pip管理包</h3>
<ul>
<li>Python Package Index</li>
<li>pip search xxx</li>
<li>pip install xxx</li>
<li>pip install requests==2.6.0</li>
<li>pip install &#x2013;upgrade</li>
<li>pip uninstall xxx yyy zzz</li>
<li>&#x2026;</li>
</ul>
<p><a id="orgfc5f61d"></a></p>
<h1 id="10-idioms">10 idioms</h1>
<p><a href="http://safehammad.com/downloads/python-idioms-2014-01-16.pdf">http://safehammad.com/downloads/python-idioms-2014-01-16.pdf</a></p>
<p><a id="orgce51d8c"></a></p>
<h2 id="make-a-script-both-importable-and-executable">Make a script both importable and executable</h2>
<ul>
<li>if <span class="underline"><span class="underline">name</span></span> == '<span class="underline"><span class="underline">main</span></span>':</li>
</ul>
<p><a id="orgfde7299"></a></p>
<h2 id="test-for-truthy-and-falsy-values">Test for “truthy” and “falsy” values</h2>
<ul>
<li>if x:</li>
<li>if not x:</li>
</ul>
<p><a id="org171b75a"></a></p>
<h2 id="use-in-where-possible">Use in where possible</h2>
<ul>
<li>if x in items:</li>
<li>for x in items:</li>
</ul>
<p><a id="org78a27aa"></a></p>
<h2 id="swap-values-without-temp-variable">Swap values without temp variable</h2>
<ul>
<li>a,b = b,a</li>
</ul>
<p><a id="orgca50116"></a></p>
<h2 id="build-strings-using-sequence">Build strings using sequence</h2>
<ul>
<li>''.join(some<sub>strings</sub>)</li>
</ul>
<p><a id="org53d0a04"></a></p>
<h2 id="eafp-is-preferable-to-lbyl">EAFP is preferable to LBYL</h2>
<p>It's Easier to Ask for Forgiveness than Permission.
Look Before You Leap.</p>
<ul>
<li>try except  vs. if</li>
</ul>
<p><a id="orgc1c463a"></a></p>
<h2 id="enumerate">Enumerate</h2>
<ul>
<li>for i, item in enumerate(items):</li>
</ul>
<p><a id="org3493f12"></a></p>
<h2 id="build-lists-using-list-comprehensions">Build lists using list comprehensions</h2>
<ul>
<li>[i*3 for i in data if i&gt;10]</li>
</ul>
<p><a id="org6e0f5df"></a></p>
<h2 id="create-dict-from-keys-and-values-using-zip">Create dict from keys and values using zip</h2>
<ul>
<li>d = dict(zip(keys, values))</li>
</ul>
<p><a id="orgebb118c"></a></p>
<h2 id="and-the-rest">And the rest&#x2026;!</h2>
<ul>
<li>while True:
    break</li>
<li>Generators and generator expressions.</li>
<li>Avoid: from module import *
    Prefer: import numpy as np; import pandas as pd</li>
<li>Use _ for “throwaway” variables e.g.:
    for k, _ in [('a', 1), ('b', 2), ('c', 3)]</li>
<li>dict.get() and dict.setdefault()</li>
<li>collections.defaultdict</li>
<li>Sort lists using l.sort(key=key<sub>func</sub>)</li>
</ul>
<p><a id="orgee351b2"></a></p>
<h1 id="debug">Debug</h1>
<p><a id="orgcb86d63"></a></p>
<h2 id="log">log</h2>
<ul>
<li>代码里的print别用了，换用logging.debug</li>
</ul>
<p><a id="orgb298cd8"></a></p>
<h2 id="trace">trace</h2>
<ul>
<li>标准库里的trace模块，可以打印运行时包含在其中的模块里所有执行到的语句</li>
<li>python -mtrace -trace xxx.py (会产生大量输出，grep自己感兴趣的内容)</li>
</ul>
<p><a id="org045425a"></a></p>
<h2 id="debugger-pdb">debugger (pdb)</h2>
<ul>
<li>import pdb</li>
<li>pdb.set<sub>trace</sub>()</li>
</ul>
<p>或者</p>
<ul>
<li>try:
        一段抛出异常的代码
    except:
        import pdb
        pdb.pm() # 或者 pdb.post<sub>mortem</sub>()</li>
</ul>
<p>或者</p>
<ul>
<li>python -mpdb xxx.py</li>
</ul>
<p><a id="org7e39b2d"></a></p>
<h2 id="refer-to-httpblogjobbolecom51062">refer to <a href="http://blog.jobbole.com/51062/">http://blog.jobbole.com/51062/</a></h2>
<p><a id="org6b2ee56"></a></p>
<h1 id="python_1">python高效编程技巧举例</h1>
<p><a id="org18f07bc"></a></p>
<h2 id="dict-vs-set">字典推导和集合推导（dict vs. set）</h2>
<ul>
<li>list<sub>a</sub> = [1,2,3,4,5]</li>
<li>list<sub>b</sub> = [x+1 for x in list<sub>a</sub>]
    [2,3,4,5,6]</li>
<li>some<sub>list</sub> = [1,2,3,4,5,2,5,1,4,8]</li>
<li>even<sub>set</sub> = {x for x in some<sub>list</sub> if x % 2 == 0}
    set([8, 2, 4])   {8,2,4}</li>
<li>d = {x : x % 2 == 0 for x in range(1,11)}
    {1: False, 2: True, 3: False, 4: True, 5: False, 6: True, 7: False, 8: True, 9: False, 10: True}</li>
<li>my<sub>set</sub> = {1,2,1,2,3,4}
    set([1, 2, 3, 4])</li>
</ul>
<p><a id="org6bdde72"></a></p>
<h2 id="counter">计数时用counter计数对象</h2>
<ul>
<li>from collections import Counter</li>
<li>c = Counter('hello world')</li>
<li>Counter({'l': 3, 'o': 2, ' ': 1, 'e': 1, 'd': 1, 'h': 1, 'r': 1, 'w': 1})</li>
<li>c.most<sub>common</sub>(2)
    [('l', 3), ('o', 2)]</li>
</ul>
<p><a id="orgefd654b"></a></p>
<h2 id="json">漂亮的打印出json</h2>
<ul>
<li>import json</li>
<li>print(json.dumps(data)) # no indention</li>
<li>print(json.dumps(data, indent=2)) # with indention</li>
</ul>
<p><a id="orgdbe3eb9"></a></p>
<h2 id="web">创建一次性的、快速的小型web服务</h2>
<p>服务器端</p>
<ul>
<li>from SimpleXMLRPCServer import SimpleXMLRPCServer</li>
<li>def file<sub>reader</sub>(file<sub>name</sub>):
    with open(file<sub>name</sub>, 'r') as f:
        return f.read()</li>
<li>server = SimpleXMLRPCServer(('localhost', 8000))</li>
<li>server.register<sub>introspection</sub><sub>functions</sub>()</li>
<li>server.register<sub>function</sub>(file<sub>reader</sub>)</li>
<li>server.serve<sub>forever</sub>()</li>
</ul>
<p>客户端</p>
<ul>
<li>import xmlrpclib</li>
<li>proxy = xmlrpclib.ServerProxy('http://localhost:8000/')</li>
<li>proxy.file<sub>reader</sub>('/tmp/secret.txt')</li>
</ul>
<p>以上就得到了一个远程文件读取工具</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../py_tips/" class="btn btn-neutral float-left" title="py tips"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../numpy/" class="btn btn-neutral float-right" title="numpy">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../py_tips/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../numpy/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
